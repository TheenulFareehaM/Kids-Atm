<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Kids Mini Banking System</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    * {
      box-sizing: border-box;
      font-family: Arial, Helvetica, sans-serif;
    }

    body {
      margin: 0;
      background: #f3f7ff;
      color: #222;
    }

    /* HEADER */
    header {
      background: linear-gradient(to right, #1e4fd8, #2563eb);
      color: white;
      padding: 20px 40px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    }

    header h1 {
      margin: 0;
      font-size: 26px;
    }

    header p {
      margin: 5px 0 0;
      opacity: 0.9;
    }

    /* LAYOUT */
    .container {
      display: grid;
      grid-template-columns: 280px 1fr;
      gap: 25px;
      padding: 30px 40px;
    }

    /* LEFT PANEL */
    .left-panel {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .card {
      background: white;
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.08);
    }

    /* PROFILE */
    .profile {
      background: linear-gradient(to bottom right, #2563eb, #1e40af);
      color: white;
      text-align: center;
    }

    .profile img {
      width: 70px;
      margin-bottom: 10px;
    }

    .profile h3 {
      margin: 10px 0 5px;
    }

    .profile p {
      margin: 3px 0;
      font-size: 14px;
      opacity: 0.95;
    }

    /* DASHBOARD */
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 14px;
      table-layout: fixed;
    }

    th, td {
      padding: 8px 6px;
      text-align: center;
      border-bottom: 1px solid #eee;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    th {
      background: #f1f5ff;
      font-weight: bold;
    }

    /* RECENT */
    .recent {
      background: #fff7d6;
    }

    /* MAIN PANEL */
    .main {
      background: white;
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.08);
    }

    .main h2 {
      margin-top: 0;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    /* ATM SELECT */
    .atm-boxes {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin: 15px 0 25px;
    }

    .atm {
      padding: 15px;
      border-radius: 12px;
      background: #eef3ff;
      border: 2px solid transparent;
      cursor: pointer;
      text-align: center;
      font-weight: bold;
    }

    .atm.active {
      border-color: #2563eb;
      background: #e0ebff;
    }

    /* FORM */
    label {
      font-weight: bold;
      font-size: 14px;
      display: block;
      margin-top: 15px;
    }

    select, input {
      width: 100%;
      padding: 10px 12px;
      margin-top: 6px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 14px;
    }

    select {
      appearance: none;
      background: #f8fbff url("data:image/svg+xml;utf8,<svg fill='%232563eb' height='24' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/></svg>") no-repeat right 12px center;
      background-size: 18px;
      cursor: pointer;
    }

    /* BUTTONS */
    .btn {
      width: 100%;
      border: none;
      padding: 14px;
      margin-top: 15px;
      border-radius: 10px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: 0.2s;
    }

    .withdraw {
      background: linear-gradient(to right, #facc15, #f59e0b);
    }

    .deposit {
      background: linear-gradient(to right, #22c55e, #16a34a);
      color: white;
    }

    .btn:hover {
      opacity: 0.9;
      transform: scale(0.99);
    }

    /* STATUS */
    .status {
      background: #f5f8ff;
      border-radius: 12px;
      padding: 15px;
      margin-top: 20px;
      font-size: 14px;
    }

    /* TOAST */
    .toast {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: #16a34a;
      color: white;
      padding: 14px 20px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      display: none;
      z-index: 1000;
    }

    .toast.error {
      background: #dc2626;
    }

  

    /* RESPONSIVE DESIGN */

    /* Tablets */
    @media (max-width: 900px) {
      .container {
        grid-template-columns: 1fr;
        padding: 20px;
      }

      header {
        padding: 15px 25px;
      }

      .main {
        padding: 25px 20px;
      }

      .atm-boxes {
        grid-template-columns: 1fr;
      }
    }

    /* Mobile Phones */
    @media (max-width: 600px) {

      header h1 {
        font-size: 20px;
      }

      header p {
        font-size: 13px;
      }

      .container {
        padding: 15px;
        gap: 15px;
      }

      .card,
      .main {
        border-radius: 14px;
        padding: 18px 15px;
      }

      .profile img {
        width: 55px;
      }

      .profile h3 {
        font-size: 16px;
      }

      table {
        font-size: 12px;
      }

      th, td {
        padding: 6px 4px;
      }

      select, input {
        font-size: 13px;
        padding: 9px 10px;
      }

      .btn {
        font-size: 14px;
        padding: 12px;
      }

      .toast {
        right: 15px;
        left: 15px;
        bottom: 20px;
        text-align: center;
      }
    }

    /* Small Devices */
    @media (max-width: 400px) {

      header h1 {
        font-size: 18px;
      }

      .profile p {
        font-size: 12px;
      }

      .btn {
        font-size: 13px;
        padding: 10px;
      }
    }

  </style>
</head>
<body>

<header>
  <h1>üèß Kids Mini Banking System</h1>
  <p>Fun ATM Simulator!</p>
</header>

<div class="container">

  <!-- LEFT PANEL -->
  <div class="left-panel">

    <!-- PROFILE -->
    <div class="card profile">
      <img src="https://cdn-icons-png.flaticon.com/512/616/616408.png">
      <h3 id="pName">Welcome</h3>
      <p id="pBalance"></p>
      <p id="pTx"></p>
    </div>

    <!-- CUSTOMER DASHBOARD -->
    <div class="card">
      <h3>Customer Dashboard</h3>
      <table>
        <thead>
          <tr>
            <th>Name</th>
            <th>Card</th>
            <th>Balance</th>
            <th>Tx</th>
          </tr>
        </thead>
        <tbody id="dashboard"></tbody>
      </table>
    </div>

    <!-- RECENT -->
    <div class="card recent">
      <h3>Recent Transaction</h3>
      <p id="recent">No transactions</p>
    </div>

  </div>


  <!-- MAIN PANEL -->
  <div class="main">

    <h2>üè¶ ATM Interface</h2>

    <!-- ATM SELECTION -->
    <div class="atm-boxes">
      <div class="atm active" data-atm="indira">Indiranagar ATM</div>
      <div class="atm" data-atm="seven">Seven Senses ATM</div>
    </div>

    <label>Select User</label>
    <select id="userSelect"></select>

    <label>Enter Amount (CKB)</label>
    <input type="number" id="amount" min="1">

    <button class="btn withdraw" onclick="withdraw()">üí∏ Withdraw</button>
    <button class="btn deposit" onclick="deposit()">üí∞ Deposit</button>

    <!-- ATM BALANCE (PROTECTED) -->
    <button class="btn" style="background:#3b82f6;color:white" onclick="toggleATM()">üîê View ATM Balance</button>

    <div class="status" id="atmStatus" style="display:none">
      <b>ATM Balance:</b><br>
      <span id="indiraCash"></span><br>
      <span id="sevenCash"></span>
    </div>

  </div>

</div>

<div class="toast" id="toast"></div>


<script>

/* GLOBAL STATE */

const state = {
  selectedATM: "indira",

  atms: {
    indira: { cash: 90 },
    seven: { cash: 100 }
  },

  users: [
    { name: "Tom", card: "tom", balance: 20, tx: 0, limit: 3 },
    { name: "Jerry", card: "jerry", balance: 11, tx: 0, limit: 3 },
    { name: "Chhota Bheem", card: "bheem", balance: 22, tx: 0, limit: 3 },
    { name: "Kirmada", card: "kirmada", balance: 0, tx: 0, limit: 3, denied: true },
    { name: "Little Singham", card: "little", balance: 0, tx: 0, limit: 3, credit: true }
  ],

  currentUser: null
};

/* INIT */

const userSelect = document.getElementById("userSelect");

const defaultOpt = document.createElement("option");
defaultOpt.value = "";
defaultOpt.textContent = "-- Select Your Account --";
defaultOpt.disabled = true;
defaultOpt.selected = true;
userSelect.appendChild(defaultOpt);

state.users.forEach((u, i) => {
  const opt = document.createElement("option");
  opt.value = i;
  opt.textContent = u.name;
  userSelect.appendChild(opt);
});

render();

/* ATM CLICK */

document.querySelectorAll(".atm").forEach(atm => {
  atm.addEventListener("click", () => {
    document.querySelectorAll(".atm").forEach(a => a.classList.remove("active"));
    atm.classList.add("active");
    state.selectedATM = atm.dataset.atm;
  });
});

/* USER CHANGE */

userSelect.addEventListener("change", e => {
  state.currentUser = state.users[e.target.value];
  render();
});

/* WITHDRAW */

function withdraw() {
  const amt = Number(document.getElementById("amount").value);
  const user = state.currentUser;
  const atm = state.atms[state.selectedATM];

  if (!user) return showToast("Select account first", true);
  if (!amt || amt <= 0) return showToast("Enter valid amount", true);
  if (user.denied) return showToast("Access Denied", true);
  if (user.tx >= user.limit) return showToast("Transaction limit reached", true);

  if (!user.credit && user.balance < amt)
    return showToast("Insufficient balance", true);

  if (atm.cash < amt)
    return showToast("ATM has no cash", true);

  user.balance -= amt;
  atm.cash -= amt;
  user.tx++;

  updateRecent(`${user.name} withdrew ${amt} CKB`);
  showToast(`Success! ${amt} CKB withdrawn`);
  render();
}

/* DEPOSIT */

function deposit() {
  const amt = Number(document.getElementById("amount").value);
  const user = state.currentUser;
  const atm = state.atms[state.selectedATM];

  if (!user) return showToast("Select account first", true);
  if (!amt || amt <= 0) return showToast("Enter valid amount", true);
  if (user.denied) return showToast("Access Denied", true);
  if (user.tx >= user.limit) return showToast("Transaction limit reached", true);

  user.balance += amt;
  atm.cash += amt;
  user.tx++;

  updateRecent(`${user.name} deposited ${amt} CKB`);
  showToast(`Success! ${amt} CKB deposited`);
  render();
}

/* TOGGLE ATM BALANCE */

function toggleATM() {
  const box = document.getElementById("atmStatus");

  if (box.style.display === "none") {
    box.style.display = "block";
    updateATMStatus();
  } else {
    box.style.display = "none";
  }
}

function updateATMStatus() {
  document.getElementById("indiraCash").textContent =
    `üè¶ Indiranagar: ${state.atms.indira.cash} CKB`;

  document.getElementById("sevenCash").textContent =
    `üè¶ Seven Senses: ${state.atms.seven.cash} CKB`;
}

/* RENDER */

function render() {
  const u = state.currentUser;

  if (!u) {
    document.getElementById("pName").textContent = "Welcome";
    document.getElementById("pBalance").textContent = "Please select your account";
    document.getElementById("pTx").textContent = "";

    document.getElementById("dashboard").innerHTML = `
      <tr>
        <td colspan="4" style="padding:15px; color:#666;">üîí Account Protected</td>
      </tr>`;
    return;
  }

  document.getElementById("pName").textContent = `Welcome, ${u.name}`;

  if (u.denied) {
    document.getElementById("pBalance").textContent = "Access Denied";
  } else if (u.credit) {
    document.getElementById("pBalance").textContent = "Credit Only";
  } else {
    document.getElementById("pBalance").textContent = `Balance: ${u.balance} CKB`;
  }

  document.getElementById("pTx").textContent = `Transactions: ${u.tx}/${u.limit}`;

  const dash = document.getElementById("dashboard");
  dash.innerHTML = "";

  const tr = document.createElement("tr");

  tr.innerHTML = `
    <td>${u.name}</td>
    <td>${u.card}</td>
    <td>${u.denied ? "Denied" : u.credit ? "Credit" : u.balance + " CKB"}</td>
    <td>${u.tx}/${u.limit}</td>
  `;

  dash.appendChild(tr);
}

/* TOAST */

function showToast(msg, error = false) {
  const t = document.getElementById("toast");

  t.textContent = msg;
  t.className = error ? "toast error" : "toast";
  t.style.display = "block";

  setTimeout(() => {
    t.style.display = "none";
  }, 2500);
}

/* RECENT */

function updateRecent(text) {
  document.getElementById("recent").textContent = text;
}

</script>

</body>
</html>
